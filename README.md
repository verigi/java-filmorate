# Filmorate

**Filmorate** — это учебный проект, представляющий собой бэкенд-сервис для поиска и оценки фильмов.

## Стек технологий и опыт разработки

В процессе разработки использовались следующие технологии:

- **Java 11**
- **Spring Boot**
- **Spring Data JPA**
-  **H2 Database**
- **Lombok**
- **REST API** 
- **JUnit 5** 
- **Maven**
- **Postman**
- **GitHub**

## Функционал
### Фильмы:
- Добавить фильм.
- Обновить фильм.
- Найти фильм по id.
- Получить список всех фильмов.
- Удалить фильм.
- Поставить лайк.
- Убрать лайк.
- Отобразить популярные фильмы.
- Поиск фильма по названию и/или режиссёру.

### Пользователи:
- Добавить пользователя.
- Обновить пользователя.
- Найти пользователя по id.
- Получить список пользователей.
- Удалить пользователя.
- Добавить пользователя в друзья.
- Удалить пользователя из друзей.
- Найти общих друзей с другим пользователем.

### Жанры:
- Добавить жанр.
- Обновить жанр.
- Найти жанр по id.
- Получить список всех жанров.
- Удалить жанр.

### Рейтинг (MPA):
- Добавить рейтинг.
- Обновить рейтинг.
- Найти рейтинг по id.
- Получить список всех рейтингов.
- Удалить рейтинг.

### Отзывы на фильм:
- Добавить отзыв.
- Обновить отзыв.
- Получить список отзывов о фильме.
- Найти отзыв по id.
- Поставить лайк отзыву.
- Поставить дизлайк отзыву.
- Удалить лайк.
- Удалить дизлайк.
- Удалить отзыв.

### Режиссёры:
- Добавить режиссёра.
- Обновить данные режиссёра.
- Получить список режиссёров.
- Найти режиссёра по id.
- Удалить режиссёра.

## Этапы разработки

### Разработка приложения велась в 4 этапа.

**1 этап (Индивидуальный)**: 
   - Реализована базовая архитектура приложения.
   - Созданы модели данных `User` и `Film`.
   - Организована логика хранения данных в памяти приложения.
   - Настроена валидация пользовательских данных.
   - Включено логирование операций.
   - Написаны юнит-тесты для проверки работы с данными в памяти.

**2 этап (Индивидуальный)**:
   - Оптимизирована архитектура приложения.
   - Логика разделена на слои бизнес-логики и системы хранения данных.
   - Внедрены зависимости с помощью Spring Framework.
   - Реализованы контроллеры для обработки HTTP-запросов (эндпоинтов).
   - Добавлено расширенное логирование для отслеживания операций.

**3 этап (Индивидуальный)**:
   - Проведена интеграция с базой данных.
   - Разработаны DAO-классы для взаимодействия с сущностями `User`, `Film`, `Genre`, `MPA`.
   - Написаны SQL-запросы для работы с базой данных.
   - Обновлены тесты для проверки работы с данными из БД.

**4 этап (Групповой)**:
   - Проведено первоначальное планирование, проектирование, разработка, ревью, тестирование, презентация заказчику.
   - Добавлены ключевые функции, такие как: система отзывов, поиск, общие фильмы, рекомендации, лента событий, популярные фильмы, фильмы по режиссерам, удаление пользователей и фильмов.
   - Разработаны DAO-классы для работы с сущностями `Director`, `Review`, `Feed`.
   - Созданы основные таблицы (`directors`, `reviews`, `feeds`) и соединительные таблицы (`films_directors`, `reviews_like`).
   - Написаны дополнительные SQL-запросы для обеспечения работы с новыми сущностями.
   - Обновлены тесты для проверки новых функций и работы с данными из БД.

## ER-диаграмма

 
### Film
- Информация о фильмах

### Rating
- Информация о рейтингах фильмов

### Film_Genre
- Соединительная таблица для фильмов и их жанров

### Genre
- Информация о жанрах фильмов

### User
- Информация о пользователях приложения

### Film_User
- Соединительная таблица для фильмов и пользователях, оценивших фильм

### Friends
- Соединительная таблица для пользователей и их друзей (других пользователей)

### Statuses
- Информация о статусе запроса "дружбы" между пользователями

### Directors
- Информация о режиссёрах

### Film_Directors
- Соединительная таблица для фильма и его режиссёра

### Feeds
- Информация о последних событиях на платформе

### Reviews
- Информация об отзыве к фильму

### Reviews_likes
- Соединительная таблица для отзыва и лайков/дизлайков

## Примеры SQL-запросов для модели Film
### 1. Добавить фильм 
#### create(Film film)
```sql
INSERT INTO films(name,
description,
releaseDate,
duration,
rating_id)
VALUES (?, ?, ?, ?, ?)
```

